--- CMakeLists.txt	2016-06-16 12:16:21.000000000 -0400
+++ CMakeLists_New.txt	2017-05-19 13:03:31.591245700 -0400
@@ -145,12 +145,21 @@
   
   set(ARMA_OS macos)
   
-  set(ARMA_USE_LAPACK true)
-  set(ARMA_USE_BLAS   true)
+  # set(ARMA_USE_LAPACK true)
+  # set(ARMA_USE_BLAS   true)
   
-  set(ARMA_LIBS ${ARMA_LIBS} "-framework Accelerate")  # or "-framework accelerate" ?
-  message(STATUS "MacOS X detected. Added '-framework Accelerate' to compiler flags")
+  # set(ARMA_LIBS ${ARMA_LIBS} "-framework Accelerate")  # or "-framework accelerate" ?
+  # message(STATUS "MacOS X detected. Added '-framework Accelerate' to compiler flags")
   
+  include(ARMA_FindOpenBLAS)
+  message(STATUS "OpenBLAS_FOUND = ${OpenBLAS_FOUND}")
+ 
+  if(OpenBLAS_FOUND)
+    set(ARMA_USE_BLAS true)
+    set(ARMA_USE_LAPACK true)  # OpenBLAS includes LAPACK in same library
+    set(ARMA_LIBS ${ARMA_LIBS} ${OpenBLAS_LIBRARIES})
+  endif()
+
   if ("${CMAKE_CXX_COMPILER_ID}" STREQUAL "Clang")
     set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -stdlib=libc++")
     message(STATUS "Clang compiler on MacOS X detected. Added '-stdlib=libc++' to compiler flags")
@@ -236,6 +245,7 @@
     if(OpenBLAS_FOUND)
       
       set(ARMA_USE_BLAS true)
+      set(ARMA_USE_LAPACK true)
       set(ARMA_LIBS ${ARMA_LIBS} ${OpenBLAS_LIBRARIES})
       
       message(STATUS "")
@@ -261,13 +271,13 @@
         set(ARMA_LIBS ${ARMA_LIBS} ${BLAS_LIBRARIES})
       endif()
       
+      if(LAPACK_FOUND)
+        set(ARMA_USE_LAPACK true)
+        set(ARMA_LIBS ${ARMA_LIBS} ${LAPACK_LIBRARIES})
+      endif()
+      
     endif()
     
-    if(LAPACK_FOUND)
-      set(ARMA_USE_LAPACK true)
-      set(ARMA_LIBS ${ARMA_LIBS} ${LAPACK_LIBRARIES})
-    endif()
-      
   endif()
   
 endif()
@@ -275,7 +285,6 @@
 
 find_package(PkgConfig)
 
-
 # set(DETECT_HDF5 true)
 
 ## uncomment the above line to enable the detection of the HDF5 library;
